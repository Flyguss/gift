{% extends "squelette.twig" %}
{% block content %}
<div class="container">
    <h1>Inscription</h1>
    <form action="inscription" method="POST">
        <label for="name">Adresse Mail :</label>
        <input type="text" id="name" name="name" required>

        <label for="description">Mot de passe :</label>
        <textarea id="password" name="password" required></textarea>
        <button type="button" id="togglePassword" class="toggle-button">Afficher le mot de passe</button>

        <button type="submit">S'inscrire</button>
    </form>
</div>
    </form>

    <script>
        const textarea = document.getElementById('password');
        const toggleButton = document.getElementById('togglePassword');
        let actualPassword = '';
        let showPassword = false;

        textarea.addEventListener('input', (event) => {
            const value = event.target.value;
            if (value.length < actualPassword.length) {
                actualPassword = actualPassword.slice(0, value.length);
            } else {
                actualPassword += value.slice(actualPassword.length);
            }
            textarea.value = showPassword ? actualPassword : '*'.repeat(actualPassword.length);
        });

        textarea.addEventListener('keydown', (event) => {
            if (event.key === 'Backspace') {
                actualPassword = actualPassword.slice(0, -1);
            }
        });

        textarea.addEventListener('focus', () => {
            textarea.value = showPassword ? actualPassword : '*'.repeat(actualPassword.length);
        });

        textarea.addEventListener('blur', () => {
            textarea.value = showPassword ? actualPassword : '*'.repeat(actualPassword.length);
        });

        toggleButton.addEventListener('click', () => {
            showPassword = !showPassword;
            textarea.value = showPassword ? actualPassword : '*'.repeat(actualPassword.length);
            toggleButton.textContent = showPassword ? 'Masquer le mot de passe' : 'Afficher le mot de passe';
        });
    </script>
{% endblock %}
